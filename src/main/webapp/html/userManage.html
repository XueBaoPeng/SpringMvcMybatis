<script type="text/javascript">
    var url = "/users";
    var method;
    function serachUser() {
        $("#dg").datagrid('load',{
            "username":$("#search_userName").val()
        });
    }


</script>
<!-- 用户管理 -->
<div class="easyui-layout" data-options="fit:true">

    <div class="inner-content" data-options="region:'center'">
        <!-- 数据表 -->
        <table id="dg" class="easyui-datagrid" title="人员列表" fit="true" fitColumns="true"
               url="/users/datagrid" method="get" toolbar="#toolbar2"
               striped="true" rownumbers="true" pagination="true" remoteSort="false">
            <thead>
            <tr>
                <th field="number" width="30" align="center" sortable="true">员工编号</th>
                <th field="username" width="20" align="center" sortable="true">用户名</th>
                <th field="role" width="50" align="center" sortable="true">角色</th>
            </tr>
            </thead>
        </table>
        <!-- /数据表 -->
        <div class="toolbar" id="toolbar2">
            <div class="search-div">
                <label>员工编号：</label>
                <input type="text" class="easyui-textbox" id="search_number"/>
                <label>用户名称：</label>
                <input type="text" class="easyui-textbox" id="search_userName"/>
                <a href="javascript:searchUser()" class="easyui-linkbutton" iconCls="icon-search">搜索</a>
            </div>
            <div class="ctrl-div">
                <a href="javascript:openUserModifyDialog()" class="easyui-linkbutton" iconCls="icon-add"
                   id="addBtn">新增</a>
                <a href="javascript:openUserModifyDialog()" class="easyui-linkbutton" iconCls="icon-edit" plain="true"
                   id="editBtn">编辑</a>
                <a href="javascript:deleteUser()" class="easyui-linkbutton" iconCls="icon-remove" plain="true"
                   id="deleteOne">删除</a>
                <a href="#" class="easyui-linkbutton" iconCls="icon-remove" plain="true" id="removeAll">批量删除</a>

            </div>

        </div>
        <!-- /数据表工具栏 -->
    </div>

    <!-- 弹出框 -->
    <div id="dlg" class="easyui-dialog" title="新增/编辑" iconCls="icon-save" modal="true" closed="true"
         buttons="#dlg-btns">
        <form id="fm" method="post">
            <div class="fitem">
                <label>用户名：</label>
                <input class="easyui-textbox" id="userId"/>
                <label>角色：</label>
                <select class="easyui-combobox">
                    <option value="0">管理员</option>
                    <option value="1">普通用户</option>
                </select>
            </div>
        </form>
    </div>


    <!-- 弹出框按钮组-->
    <div id="dlg-btns">
        <a href="javascript:saveUser()" class="easyui-linkbutton" iconCls="icon-ok" id="saveBtn">保存</a>
        <a href="javascript:closeUserDialog()" class="easyui-linkbutton" iconCls="icon-cancel" id="cancelBtn">取消</a>
    </div>
    <!-- /弹出框 按钮组-->
</div>

<script type="text/javascript">
    $(function () {
        //打开弹出框
        $("#addBtn, #editBtn").click(function (e) {
            e.preventDefault();
            $("#dlg").dialog("open");
        });
        //关闭弹出框
        $("#saveBtn, #cancelBtn").click(function (e) {
            e.preventDefault();
            $("#dlg").dialog("close");
        });
    });
</script>
